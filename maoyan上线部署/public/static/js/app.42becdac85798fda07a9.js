webpackJsonp([1],{"+1wR":function(t,e){},"+Mck":function(t,e){},"5Dgh":function(t,e){},"5ipt":function(t,e){},"9El3":function(t,e){},GyBv:function(t,e){},JqE6:function(t,e){},KTSw:function(t,e){},McEj:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var a=i("VU/8")({name:"App"},n,!1,function(t){i("gzgX")},null,null).exports,o=i("/ocq"),r=i("aozt"),c=i.n(r),l=i("9rMa");s.a.use(l.a);var v=new l.a.Store({state:{username:""},mutations:{USER_NAME:function(t,e){t.username=e}}}),d={name:"Header",props:{title:{type:String,default:"猫眼电影"}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("header",{attrs:{id:"header"}},[this._t("default"),e("h1",[this._v(this._s(this.title))])],2)},staticRenderFns:[]};var h=i("VU/8")(d,u,!1,function(t){i("9El3")},null,null).exports,_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"content"}},[e("div",{staticClass:"movie_menu"},[e("router-link",{staticClass:"city_name",attrs:{tag:"div",to:"/home/city"}},[e("span",[this._v("大连")]),e("i",{staticClass:"iconfont icon-lower-triangle"})]),this._v(" "),e("div",{staticClass:"hot_swtich"},[e("router-link",{staticClass:"hot_item",attrs:{tag:"div",to:"/home/now"}},[this._v("正在热映")]),this._v(" "),e("router-link",{staticClass:"hot_item",attrs:{tag:"div",to:"/home/coming"}},[this._v("即将上映")])],1),this._v(" "),e("router-link",{staticClass:"search_entry",attrs:{tag:"div",to:"/home/search"}},[e("i",{staticClass:"iconfont icon-sousuo"})])],1),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)},staticRenderFns:[]};var m=i("VU/8")({name:"Movie"},_,!1,function(t){i("5ipt")},"data-v-90ff7f1a",null).exports,f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("footer",{attrs:{id:"footer"}},[i("ul",[i("router-link",{attrs:{tag:"li",to:"/home"}},[i("i",{staticClass:"iconfont icon-dianying"}),t._v(" "),i("p",[t._v("电影")])]),t._v(" "),i("router-link",{attrs:{tag:"li",to:"/cinema"}},[i("i",{staticClass:"iconfont icon-yingyuan"}),t._v(" "),i("p",[t._v("影院")])]),t._v(" "),i("router-link",{attrs:{tag:"li",to:"/user"}},[i("i",{staticClass:"iconfont icon-wode"}),t._v(" "),i("p",[t._v("我的")])])],1)])},staticRenderFns:[]};var p=i("VU/8")({name:"Footer"},f,!1,function(t){i("ynJi")},null,null).exports,g={name:"Home",components:{Header:h,Movie:m,Footer:p}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"main"}},[e("Header",{attrs:{title:"猫眼电影"}}),this._v(" "),e("Movie"),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var y=i("VU/8")(g,C,!1,function(t){i("JqE6")},"data-v-b7793828",null).exports,w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"content"}},[t._m(0),t._v(" "),i("div",{staticClass:"cinema_body"},[i("ul",t._l(t.cinemaList,function(e){return i("li",[i("div",[i("span",[t._v(t._s(e.nm))]),t._v(" "),i("span",{staticClass:"q"},[i("span",{staticClass:"price"},[t._v(t._s(e.sellPrice))]),t._v(" 元起")])]),t._v(" "),i("div",{staticClass:"address"},[i("span",[t._v(t._s(e.addr))]),t._v(" "),i("span",[t._v(t._s(e.distance))])]),t._v(" "),i("div",{staticClass:"card"},t._l(e.tag,function(e,s){return 1===e?i("div",{class:t._f("classCard")(s)},[t._v(t._s(t._f("formatCard")(s)))]):t._e()}))])}))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cinema_menu"},[e("div",{staticClass:"city_switch"},[this._v("\n\t\t\t\t全城 "),e("i",{staticClass:"iconfont icon-lower-triangle"})]),this._v(" "),e("div",{staticClass:"brand_swtich"},[this._v("\n\t\t\t\t品牌 "),e("i",{staticClass:"iconfont icon-lower-triangle"})]),this._v(" "),e("div",{staticClass:"feature_switch"},[this._v("\n\t\t\t\t特色 "),e("i",{staticClass:"iconfont icon-lower-triangle"})])])}]};var x={name:"Home",components:{Header:h,CinemaList:i("VU/8")({name:"CinemaList",data:function(){return{cinemaList:[]}},mounted:function(){var t=this;this.axios.get("/ajax/cinemaList?limit=20&cityId=65").then(function(e){t.cinemaList=e.data.cinemas})},filters:{formatCard:function(t){for(var e=[{key:"allowRefund",val:"退"},{key:"endorse",val:"改签"},{key:"sell",val:"折扣卡"},{key:"snack",val:"小吃"}],i=0;i<e.length;i++)if(e[i].key===t)return e[i].val;return""},classCard:function(t){for(var e=[{key:"allowRefund",val:"bl"},{key:"endorse",val:"bl"},{key:"sell",val:"or"},{key:"snack",val:"or"}],i=0;i<e.length;i++)if(e[i].key===t)return e[i].val;return""}}},w,!1,function(t){i("yOl2")},null,null).exports,Footer:p}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"main"}},[e("Header",{attrs:{title:"猫眼影院"}}),this._v(" "),e("CinemaList"),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var k=i("VU/8")(x,A,!1,function(t){i("KTSw")},"data-v-21f8c05e",null).exports,L={name:"Home",components:{Header:h,Footer:p},methods:{handleLogout:function(){this.axios.get("/users/logout").then(function(t){console.log(t),0===t.data.code&&(window.localStorage.clear(),window.location.reload())})}}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"main"}},[e("Header",{attrs:{title:"我的猫眼"}}),this._v(" "),e("p",[this._v("hello user : "+this._s(this.$store.state.username)+" , "),e("a",{attrs:{href:"javascript:;"},on:{tap:this.handleLogout}},[this._v("退出")])]),this._v(" "),e("Footer")],1)},staticRenderFns:[]};var E=i("VU/8")(L,M,!1,function(t){i("GyBv")},"data-v-3b018730",null).exports,U={name:"Login",data:function(){return{}},components:{Header:h},methods:{handleSubmit:function(){var t=this;this.axios.get("/users/login",{params:{username:this.$refs.username.value,password:this.$refs.password.value}}).then(function(e){0===e.data.code?(window.localStorage.setItem("token",e.data.token),t.$store.commit("USER_NAME",e.data.username),t.$router.push("/user")):window.location.reload()})}}},V={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"main"}},[e("Header",{attrs:{title:"用户登录"}},[e("router-link",{staticClass:"iconfont icon-right",attrs:{tag:"i",to:"/home"}})],1),this._v(" "),e("div",{attrs:{id:"content"}},[e("div",[this._v("用户名："),e("input",{ref:"username",attrs:{type:"text"}})]),this._v(" "),e("div",[this._v("密码："),e("input",{ref:"password",attrs:{type:"password"}})]),this._v(" "),e("div",{on:{tap:this.handleSubmit}},[e("input",{attrs:{type:"submit",value:"登录"}})])])],1)},staticRenderFns:[]};var H=i("VU/8")(U,V,!1,function(t){i("+Mck")},"data-v-2837fe46",null).exports,R={name:"Detail",data:function(){return{detailMovie:{}}},components:{Header:h},mounted:function(){var t=this,e=this.$route.params.id;this.axios.get("/ajax/detailmovie?movieId="+e).then(function(e){t.detailMovie=e.data.detailMovie,t.$nextTick(function(){new Swiper(".detail_player",{slidesPerView:"auto",freeMode:!0,freeModeSticky:!0})})})}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"main"}},[i("Header",{attrs:{title:"电影详情"}},[i("router-link",{staticClass:"iconfont icon-right",attrs:{tag:"i",to:"/home"}})],1),t._v(" "),i("div",{attrs:{id:"content"}},[i("div",{staticClass:"detail_list"},[i("div",{staticClass:"detail_list_bg"}),t._v(" "),i("div",{staticClass:"detail_list_filter"}),t._v(" "),i("div",{staticClass:"detail_list_content"},[i("div",{staticClass:"detail_list_img"},[i("img",{attrs:{src:t._f("setWH")(t.detailMovie.img,"148.208"),alt:""}})]),t._v(" "),i("div",{staticClass:"detail_list_info"},[i("h2",[t._v(t._s(t.detailMovie.nm))]),t._v(" "),i("p",[t._v(t._s(t.detailMovie.enm))]),t._v(" "),i("p",[t._v(t._s(t.detailMovie.sc))]),t._v(" "),i("p",[t._v(t._s(t.detailMovie.cat))]),t._v(" "),i("p",{},[t._v(t._s(t.detailMovie.src)+" / "+t._s(t.detailMovie.dur)+"分钟")]),t._v(" "),i("p",[t._v(t._s(t.detailMovie.pubDesc))])])])]),t._v(" "),i("div",{staticClass:"detail_intro"},[i("p",[t._v(t._s(t.detailMovie.dra))])]),t._v(" "),i("div",{staticClass:"detail_player swiper-container"},[i("ul",{staticClass:"swiper-wrapper"},t._l(t.detailMovie.photos,function(e){return i("li",{staticClass:"swiper-slide"},[i("div",[i("img",{attrs:{src:t._f("setWH")(e,"90.70"),alt:""}})])])}))])])],1)},staticRenderFns:[]};var Y=i("VU/8")(R,S,!1,function(t){i("pReq")},"data-v-7e6c3e82",null).exports,N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city_body"},[i("div",{staticClass:"city_list"},[i("div",{staticClass:"city_hot"},[i("h2",[t._v("热门城市")]),t._v(" "),i("ul",{staticClass:"clearfix"},t._l(t.hotCity,function(e){return i("li",[t._v(t._s(e.name))])}))]),t._v(" "),i("div",{ref:"cityList",staticClass:"city_sort"},t._l(t.cityList,function(e){return i("div",[i("h2",[t._v(t._s(e.index.toUpperCase()))]),t._v(" "),i("ul",t._l(e.list,function(e){return i("li",[t._v(t._s(e))])}))])}))]),t._v(" "),i("div",{staticClass:"city_index"},[i("ul",t._l(t.cityList,function(e,s){return i("li",{on:{tap:function(e){t.handleLink(s)}}},[t._v(t._s(e.index.toUpperCase()))])}))])])},staticRenderFns:[]};var q=i("VU/8")({name:"City",data:function(){return{cityList:[],hotCity:[]}},mounted:function(){var t=this;this.axios.get("/static/mock/city.json").then(function(e){"ok"===e.data.msg&&(t.cityList=t.formatCityList(e.data.data.cities))})},methods:{formatCityList:function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i].pinyin.charAt(0);if(t[i].isHot&&this.hotCity.push(t[i]),a(s))e.push({index:s,list:[t[i].name]});else for(var n=0;n<e.length;n++)e[n].index===s&&e[n].list.push(t[i].name)}function a(t){for(var i=0;i<e.length;i++)if(e[i].index===t)return!1;return!0}return e.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),e},handleLink:function(t){var e=this.$refs.cityList.getElementsByTagName("h2");this.$refs.cityList.parentNode.scrollTop=e[t].offsetTop}}},N,!1,function(t){i("UeSQ")},null,null).exports,B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"movie_body"},[s("ul",t._l(t.movieList,function(e){return s("li",{on:{tap:function(i){t.handleDetail(e.id)}}},[s("div",{staticClass:"pic_show"},[s("img",{attrs:{src:t._f("setWH")(e.img,"128.180")}})]),t._v(" "),s("div",{staticClass:"info_list"},[s("h2",[t._v(t._s(e.nm)+" "),e.version?s("img",{attrs:{src:i("tYrh"),alt:""}}):t._e()]),t._v(" "),s("p",[t._v("观众评 "),s("span",{staticClass:"grade"},[t._v(t._s(e.sc))])]),t._v(" "),s("p",[t._v("主演: "+t._s(e.star))]),t._v(" "),s("p",[t._v(t._s(e.showInfo))])]),t._v(" "),s("div",{staticClass:"btn_mall"},[t._v("\n\t\t\t\t\t购票\n\t\t\t\t")])])}))])},staticRenderFns:[]};var F=i("VU/8")({name:"Now",data:function(){return{movieList:[]}},mounted:function(){var t=this;this.axios.get("/ajax/movieOnInfoList").then(function(e){t.movieList=e.data.movieList})},methods:{handleDetail:function(t){this.$router.push("/detail/"+t)}}},B,!1,function(t){i("McEj")},"data-v-f0718f06",null).exports,I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"movie_body"},[i("ul",t._l(t.comingList,function(e){return i("li",[i("div",{staticClass:"pic_show"},[i("img",{attrs:{src:t._f("setWH")(e.img,"128.180")}})]),t._v(" "),i("div",{staticClass:"info_list"},[i("h2",[t._v(t._s(e.nm))]),t._v(" "),i("p",[i("span",{staticClass:"person"},[t._v(t._s(e.wish))]),t._v(" 人想看")]),t._v(" "),i("p",[t._v("主演: "+t._s(e.star))]),t._v(" "),i("p",[t._v(t._s(e.rt)+"上映")])]),t._v(" "),i("div",{staticClass:"btn_pre"},[t._v("\n\t\t\t\t\t预售\n\t\t\t\t")])])}))])},staticRenderFns:[]};var T=i("VU/8")({name:"Coming",data:function(){return{comingList:[]}},mounted:function(){var t=this;this.axios.get("/ajax/comingList?ci=65&token=&limit=10").then(function(e){t.comingList=e.data.coming})}},I,!1,function(t){i("5Dgh")},"data-v-e8ec7964",null).exports,W={name:"Search",data:function(){return{message:"",moviesList:[],source:null}},methods:{cancelQuest:function(){"function"==typeof this.source&&this.source("终止请求")}},watch:{message:function(t){var e=this;this.cancelQuest(),this.axios.get("/ajax/search?kw="+t+"&cityId=65&stype=-1",{cancelToken:new this.axios.CancelToken(function(t){e.source=t})}).then(function(t){t.data.movies?e.moviesList=t.data.movies.list:e.moviesList=[]}).catch(function(t){e.axios.isCancel(t)?console.log("Rquest canceled",t.message):console.log(t)})}}},j={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search_body"},[i("div",{staticClass:"search_input"},[i("div",{staticClass:"search_input_wrapper"},[i("i",{staticClass:"iconfont icon-sousuo"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{type:"text"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"search_result"},[i("h3",[t._v("电影/电视剧/综艺")]),t._v(" "),i("ul",t._l(t.moviesList,function(e){return i("li",[i("div",{staticClass:"img"},[i("img",{attrs:{src:t._f("setWH")(e.img,"128.180")}})]),t._v(" "),i("div",{staticClass:"info"},[i("p",[i("span",[t._v(t._s(e.nm))]),i("span",[t._v(t._s(e.sc))])]),t._v(" "),i("p",[t._v(t._s(e.enm))]),t._v(" "),i("p",[t._v(t._s(e.cat))]),t._v(" "),i("p",[t._v(t._s(e.rt))])])])}))])])},staticRenderFns:[]};var Q=i("VU/8")(W,j,!1,function(t){i("+1wR")},null,null).exports;s.a.use(o.a);var X=new o.a({routes:[{path:"/home",component:y,children:[{path:"/home/city",component:q},{path:"/home/now",component:F},{path:"/home/coming",component:T},{path:"/home/search",component:Q},{path:"/home",redirect:"/home/now"}]},{path:"/cinema",component:k},{path:"/user",component:E},{path:"/login",component:H},{path:"/detail/:id",component:Y},{path:"/*",redirect:"/home"}]});X.beforeEach(function(t,e,i){"/user"==t.path?c.a.get("/users/isLogin",{params:{token:window.localStorage.getItem("token")}}).then(function(t){0===t.data.code?(v.commit("USER_NAME",t.data.username),i()):i({path:"/login"})}):i()});var b=X;s.a.prototype.axios=c.a,s.a.config.productionTip=!1,s.a.filter("setWH",function(t,e){return t?t.replace(/w\.h/g,e):""}),new s.a({el:"#app",router:b,store:v,components:{App:a},template:"<App/>"})},UeSQ:function(t,e){},gzgX:function(t,e){},pReq:function(t,e){},tYrh:function(t,e){t.exports="data:image/png;base64,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"},yOl2:function(t,e){},ynJi:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.42becdac85798fda07a9.js.map